<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Stephanie Allison">
   <meta name="GENERATOR" content="Mozilla/4.79 [en] (WinNT; U) [Netscape]">
   <meta name="KeyWords" content="EPICS, VME, BiRa, VSAM, device support">
   <title>EPICS VSAM Support</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<h1>
EPICS: VME Smart Analog Monitor</h1>
This page is the home of the EPICS driver and device support for the VME
Smart Analog Module (VSAM). This site gives access to the software source
code, information on other modules which are needed to install and run
it, and documentation on how to include and use this software in your EPICS
applications. Please email any comments and bug reports to <a href="mailto:saa_at_slac.stanford.edu">Stephanie
Allison</a> who is responsible for coordinating development and releases.
<h2>
Hardware Supported</h2>
The software can drive the following types of hardware:
<ul>
<li>
<a href="http://www.bira.com/cat/7305.htm">BiRa Systems Model VME 7305
VME Smart Analog Monitor (VSAM)</a></li>

</ul>
For hardware assistance, please contact <a href="mailto:info@bira.com">BiRa
Systems</a> (current contact name is Phil Biswell).
<p>Make sure the VSAM module has the newest firmware revision (Version
3 or above). BaBar has reported a calibration problem with the older versions.
When the voltage is near 0, it sometimes fluxuates negative, and in this
case when performing a calibration, the module gets stuck and never exits
the calibration cycle.
<br>&nbsp;
<h2>
Where to Find it</h2>
You can download the software by anonymous ftp&nbsp; from the links in
the table below:
<br>&nbsp;
<br>&nbsp;
<table BORDER >
<tr ALIGN=CENTER>
<td><b>Module Version</b></td>

<td><b>EPICS Release</b></td>

<td><b>Filename</b></td>

<td><b>Documentation</b></td>

<td><b>Release Notes</b></td>

<td><b>Known Bugs</b></td>
</tr>

<tr>
<td>
<center>R1.0</center>
</td>

<td>
<center>R3.13.2</center>
</td>

<td><a href="ftp://ftp.slac.stanford.edu/groups/controls/soft/epics/vsam.tar.gz">vsam.tar.gz</a></td>

<td>
<center>See Below</center>
</td>

<td>
<center><a href="vsam_releaseNotes.html">release notes</a></center>
</td>

<td>
<center><a href="vsam_bugs.html">bugs</a></center>
</td>
</tr>
</table>

<ul>&nbsp;</ul>

<h2>
Installation and Building</h2>
After obtaining a copy of the distribution, it must be installed and built
for use at your site. These steps only need to be performed once for the
site (unless versions of the module running under different releases of
EPICS and/or the other required modules are needed).
<ol>
<li>
Start with an existing EPICS application directory and cd to the src directory.</li>

<li>
Unpacking the distribution tar file produces a &lt;vsam> directory.</li>

<li>
If you do not have the vmeCardRecord available to your application, comment
out references to "devVSAMCard" in vsam/src/Makefile.Vx or download 
<a href="ftp://ftp.slac.stanford.edu/groups/controls/soft/epics/vmeCardRecord.tar.gz">vmeCardRecord.tar.gz</a> and 
<a href="ftp://ftp.slac.stanford.edu/groups/controls/soft/epics/util.tar.gz">
util.tar.gz</a> and unpack them at the same level as vsam.</li>

<li>If using vmeCardRecord, add vmeCardRecord to your src/Makefile.</li>
<li>Next, add vsam to your src/Makefile and run <tt>gnumake</tt>.
Check for any compilation errors.</li>

<li>
When using the vsam in your application, you'll want to include devVSAM.dbd
along with the normal base.dbd files when building your local applications's
database definition file.  If you are using vmeCardRecord, also include  
vmeCardRecord.dbd and devVSAMCard.dbd.  See vsam/src/VSAMInclude.dbd for
an example. You'll also want to include vsamLib, and vmeCardRecord.o if using
vmeCardRecord, in src/Makefile.Vx when building your application's library.
</li>
<li>
See <a href="VSAM_ioc_mods">vsam/html/VSAM_ioc_mods</a> for vxWorks kernel
modification to perform A24/D32 accesses.</li>

<li>
See <a href="VSAM-HOW-TO">vsam/html/VSAM-HOW-TO</a> for adding VSAM_init
to your IOC startup script and address switch information.</li>

<li>
Example databases and templates reside in vsam/db.</li>

<li>
Example DM displays reside in vsam/dl. Old gif images of some of these
displays are:</li>

<ol><a href="vsam.gif">VSAM 0</a>
<br><a href="vsam_data.gif">Data for Channel 0 of VSAM 0</a>
<br><a href="vsam_details.gif">Detail Data for Channel 0 of VSAM 0</a>
<br><a href="vsam_module.gif">VSAM Module</a>.</ol>

<li>
Please email&nbsp; <a href="mailto:saa_at_slac.stanford.edu">Stephanie
Allison</a>&nbsp; so she can keep track of which sites are using this software.</li>
</ol>

<h2>
Documentation</h2>
The following documentation is available:
<ul>
<li>
<a href="vsam.doc">BiRa Systems Model VME 7305 (VSAM) User's Manual</a></li>
<li>
<a href="http://www.slac.stanford.edu/BFROOT/www/Detector/DAQ/Det_Cntrl_Monitor/vsam/vsam.html">BaBar
Detector Control and Monitor VSAM</a></li>
</ul>

<h2>
In Use</h2>
This software was originally developed by Susanna Jacobson (LBL) and 
is now maintained by the SLAC ESD Software group.&nbsp; The VSAM software&nbsp;
is currently used at the following EPICS sites:
<ul>
<li>
SLAC:&nbsp; BaBar and NLC Test Accelerator Low-Level RF (TARF)</li>
</ul>

<hr WIDTH="100%">
<address>
<a href="mailto:saa_at_slac.stanford.edu">Stephanie Allison</a></address>

</body>
</html>
